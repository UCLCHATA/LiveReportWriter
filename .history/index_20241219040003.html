<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Assessment Form R3</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <script src="https://apis.google.com/js/api.js"></script>
    <script type="module" src="app.js" defer></script>
</head>
<body>
    <header class="site-header">
        <div class="header-content">
            <h1>Assessment Form R3</h1>
            <div class="header-controls">
                <select id="chata-id-select" name="chata_id" required>
                    <option value="">Select CHATA ID</option>
                    <option value="NO_CHATA">Use w/o CHATA-ID</option>
                </select>
                <button id="refresh-data" class="refresh-button" title="Refresh CHATA data">
                    <i class="material-icons">refresh</i>
                </button>
            </div>
        </div>
    </header>

    <main class="main-container">
        <!-- Left side - PDF Viewers and Context Sections -->
        <div class="pdf-container" id="pdf-container">
            <!-- Default state -->
            <div class="pdf-placeholder" id="default-placeholder">
                <i class="material-icons">description</i>
                <span>Select a CHATA ID to view assessment documents</span>
            </div>

            <!-- NO_CHATA Context Sections -->
            <div class="no-chata-context hidden" id="no-chata-context">
                <!-- Patient Context -->
                <div class="context-section" data-section="patient">
                    <div class="context-section-header">
                        <h4><i class="material-icons">person</i>Patient Context</h4>
                        <i class="material-icons toggle-icon">expand_more</i>
                    </div>
                    <div class="context-section-content">
                        <div class="context-grid">
                            <div class="input-group">
                                <label>Age Range</label>
                                <select name="age_range" class="context-input">
                                    <option value="">Select age range</option>
                                    <option>0-4 years</option>
                                    <option>5-8 years</option>
                                    <option>9-12 years</option>
                                    <option>13-16 years</option>
                                    <option>17+ years</option>
                                </select>
                            </div>
                            <div class="input-group optional-field">
                                <label class="optional-label">Child's Name</label>
                                <input type="text" name="child_name" class="context-input">
                            </div>
                            <div class="input-group">
                                <label>Gender</label>
                                <select name="gender" class="context-input">
                                    <option value="">Select gender</option>
                                    <option>Male</option>
                                    <option>Female</option>
                                    <option>Other</option>
                                    <option>Prefer not to say</option>
                                </select>
                            </div>
                            <div class="input-group">
                                <label>Assessment Setting</label>
                                <select name="setting" class="context-input">
                                    <option value="">Select setting</option>
                                    <option>Clinic</option>
                                    <option>School</option>
                                    <option>Home</option>
                                    <option>Remote</option>
                                </select>
                            </div>
                            <div class="input-group">
                                <label>Assessment Date</label>
                                <input type="date" name="assessment_date" class="context-input">
                            </div>
                            <div class="input-group full-width">
                                <label>Previous Assessments</label>
                                <div class="checkbox-with-date">
                                    <label><input type="checkbox" name="has_previous_assessment"> Yes</label>
                                    <input type="date" name="previous_assessment_date" class="context-input" disabled>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Clinical Context -->
                <div class="context-section" data-section="clinical">
                    <div class="context-section-header">
                        <h4><i class="material-icons">medical_services</i>Clinical Context</h4>
                        <i class="material-icons toggle-icon">expand_more</i>
                    </div>
                    <div class="context-section-content">
                        <div class="context-grid">
                            <div class="input-group full-width">
                                <label>Primary Concerns</label>
                                <textarea name="primary_concerns" class="context-textarea" placeholder="Describe the main concerns that led to this assessment"></textarea>
                            </div>
                            <div class="input-group full-width">
                                <label>Duration of Concerns</label>
                                <textarea name="duration_concerns" class="context-textarea" placeholder="How long have these concerns been present?"></textarea>
                            </div>
                            <div class="input-group full-width">
                                <label>Impact on Daily Life</label>
                                <textarea name="daily_impact" class="context-textarea" placeholder="How do these concerns affect daily activities?"></textarea>
                            </div>
                            <div class="input-group full-width">
                                <label>Current Support</label>
                                <textarea name="current_support" class="context-textarea" placeholder="What support is currently in place?"></textarea>
                            </div>
                            <div class="input-group full-width">
                                <label>Standardized Tools/Tests Used</label>
                                <textarea name="standardized_tools" class="context-textarea" placeholder="List any standardized assessment tools or tests used and their outcomes"></textarea>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Family Context -->
                <div class="context-section" data-section="family">
                    <div class="context-section-header">
                        <h4><i class="material-icons">family_restroom</i>Family Context</h4>
                        <i class="material-icons toggle-icon">expand_more</i>
                    </div>
                    <div class="context-section-content">
                        <div class="context-grid">
                            <div class="input-group full-width">
                                <label>Family Composition</label>
                                <textarea name="family_composition" class="context-textarea" placeholder="Who lives with the child? Key relationships?"></textarea>
                            </div>
                            <div class="input-group full-width">
                                <label>Family Priorities</label>
                                <textarea name="family_priorities" class="context-textarea" placeholder="What are the family's main goals and concerns?"></textarea>
                            </div>
                            <div class="input-group full-width optional-field">
                                <label class="optional-label">Cultural Considerations</label>
                                <textarea name="cultural_considerations" class="context-textarea" placeholder="Any cultural factors to consider?"></textarea>
                            </div>
                            <div class="input-group full-width optional-field">
                                <label class="optional-label">Languages at Home</label>
                                <textarea name="languages_home" class="context-textarea" placeholder="What languages are spoken at home?"></textarea>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Educational Context -->
                <div class="context-section" data-section="education">
                    <h4><i class="material-icons">school</i>Educational Context</h4>
                    <div class="context-grid">
                        <div class="input-group full-width">
                            <label>Educational Setting</label>
                            <textarea name="educational_setting" class="context-textarea" placeholder="Current school/educational environment"></textarea>
                        </div>
                        <div class="input-group full-width">
                            <label>School Support</label>
                            <textarea name="school_support" class="context-textarea" placeholder="What support is in place at school?"></textarea>
                        </div>
                        <div class="input-group full-width">
                            <label>Academic Profile</label>
                            <textarea name="academic_profile" class="context-textarea" placeholder="Academic strengths and challenges"></textarea>
                        </div>
                        <div class="input-group full-width">
                            <label>Social Interactions</label>
                            <textarea name="social_interactions" class="context-textarea" placeholder="How does the child interact with peers and staff?"></textarea>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Existing PDF viewers -->
            <div class="pdf-viewer-container hidden" id="pdf-viewer-container">
                <div class="pdf-viewer" id="pdf-viewer-1">
                    <h3><i class="material-icons">description</i>CHATA Report R1</h3>
                    <div class="pdf-placeholder" id="pdf-placeholder-1">
                        <i class="material-icons">picture_as_pdf</i>
                        <span>PDF viewer not available when using without CHATA-ID</span>
                    </div>
                    <iframe id="pdf-frame-1" 
                            style="display: none;"
                            allow="autoplay"
                            width="100%"
                            height="100%"
                            frameborder="0"
                            allowfullscreen></iframe>
                </div>
                <div class="pdf-viewer" id="pdf-viewer-2">
                    <h3><i class="material-icons">description</i>ADOS Report R2</h3>
                    <div class="pdf-placeholder" id="pdf-placeholder-2">
                        <i class="material-icons">picture_as_pdf</i>
                        <span>PDF viewer not available when using without CHATA-ID</span>
                    </div>
                    <iframe id="pdf-frame-2"
                            style="display: none;"
                            allow="autoplay"
                            width="100%"
                            height="100%"
                            frameborder="0"
                            allowfullscreen></iframe>
                </div>
            </div>
        </div>

        <!-- Right side - Form -->
        <div class="form-container">
            <div class="form-content">
                <!-- Status Section -->
                <div class="section status-section">
                    <h4><i class="material-icons">check_circle_outline</i>Status</h4>
                    <div class="status-group">
                        <div class="status-item">
                            <h4>ASC Status</h4>
                            <select name="asc_status">
                                <option value="">--</option>
                                <option>ASC confirmed</option>
                                <option>ASC not confirmed</option>
                            </select>
                        </div>
                        
                        <div class="status-item">
                            <h4>ADHD Status</h4>
                            <select name="adhd_status">
                                <option value="">--</option>
                                <option>No concerns identified</option>
                                <option>Assessment recommended</option>
                                <option>Previously confirmed</option>
                                <option>Confirmed during diagnosis</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Professional Referrals -->
                <div class="section referrals-section">
                    <h4><i class="material-icons">share</i>Professional Referrals</h4>
                    <div class="referrals-grid">
                        <label><input type="checkbox" value="Speech & Language"> Speech & Language</label>
                        <label><input type="checkbox" value="Educational Psychology"> Educational Psychology</label>
                        <label><input type="checkbox" value="Sleep Support"> Sleep Support</label>
                        <div class="referral-other-row">
                            <label><input type="checkbox" value="Other"> Other </label>
                            <input type="text" name="other_referrals" class="referral-other-input" placeholder="Specific Remarks">
                        </div>
                    </div>
                </div>

                <!-- Middle Sections Grid -->
                <div class="middle-sections-grid">
                    <!-- Clinical Observations -->
                    <div class="text-box-container clinical" data-default-text="• Social engagement patterns
• Communication style
• Response to activities
• Behavioral patterns
• Notable strengths/challenges">
                        <div class="text-box-header">
                            <i class="material-icons">visibility</i>
                            <h4>Key Clinical Observations</h4>
                        </div>
                        <div class="text-box-content">
                            <textarea class="text-area" spellcheck="true"></textarea>
                        </div>
                    </div>

                    <!-- Strengths & Abilities -->
                    <div class="text-box-container strengths" data-default-text="• Memory (e.g., Strong recall of sequences)
• Visual (e.g., Pattern recognition)
• Physical (e.g., Fine motor skills)
• Creative (e.g., Problem-solving abilities)
• Focus (e.g., Sustained attention)
• Problem-solving (e.g., Logical approach)">
                        <div class="text-box-header">
                            <i class="material-icons">stars</i>
                            <h4>Strengths & Abilities</h4>
                        </div>
                        <div class="text-box-content">
                            <textarea class="text-area" spellcheck="true"></textarea>
                        </div>
                    </div>

                    <!-- Priority Support Areas -->
                    <div class="text-box-container priority" data-default-text="• Assessment data patterns
• Family priorities
• School observations
• Clinical judgment">
                        <div class="text-box-header">
                            <i class="material-icons">priority_high</i>
                            <h4>Priority Support Areas</h4>
                        </div>
                        <div class="text-box-content">
                            <textarea class="text-area" spellcheck="true"></textarea>
                        </div>
                    </div>

                    <!-- Support Recommendations -->
                    <div class="text-box-container support" data-default-text="• Strength-based strategies
• Practical implementation
• Home/school alignment
• Family resources">
                        <div class="text-box-header">
                            <i class="material-icons">lightbulb</i>
                            <h4>Support Recommendations</h4>
                        </div>
                        <div class="text-box-content">
                            <textarea class="text-area" spellcheck="true"></textarea>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Button Group -->
            <div class="button-group">
                <button class="submit-button">Generate Report</button>
                <button class="clear-button">Clear Form</button>
            </div>
        </div>
    </main>

    <!-- Modal System -->
    <div class="text-box-modal">
        <div class="modal-header">
            <div class="modal-controls">
                <button class="modal-save">Save</button>
                <button class="modal-close">Close</button>
            </div>
        </div>
        <div class="modal-content">
            <textarea class="modal-textarea" spellcheck="true"></textarea>
        </div>
    </div>
    <div class="modal-backdrop"></div>

    <footer class="site-footer">
        <img class="footer-logo" src="https://upload.wikimedia.org/wikipedia/sco/thumb/d/d1/University_College_London_logo.svg/300px-University_College_London_logo.svg.png" alt="Left Logo">
        <div class="footer-content">
            <p>&copy; 2024 CHATA Report Writing Form System</p>
            <p class="contact-text">Need help? Contact uclchata@gmail.com</p>
        </div>
        <img class="footer-logo" src="https://upload.wikimedia.org/wikipedia/commons/thumb/d/d3/National_Health_Service_%28England%29_logo.svg/371px-National_Health_Service_%28England%29_logo.svg.png" alt="Right Logo">
    </footer>
</body>
</html>